<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Continuous integration - CI • sandbox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Continuous integration - CI">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sandbox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/continuous-integration.html">Continuous integration - CI</a>
    </li>
    <li>
      <a href="../articles/make-a-package.html">Make an R package</a>
    </li>
    <li>
      <a href="../articles/use-git-and-github.html">Use Git and Github</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Continuous integration - CI</h1>
                        <h4 class="author">Vignette Author</h4>
            
            <h4 class="date">2019-03-22</h4>
      
      
      <div class="hidden name"><code>continuous-integration.Rmd</code></div>

    </div>

    
    
<div id="introduction-to-ci" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-to-ci" class="anchor"></a>Introduction to CI</h2>
<p>Continuous integration - or CI - is a development practice where developers push and merge their code modifications as often as possible to a shared branch in a remote repository (i.e. <a href="https://github.com/">Github.com</a> repository), where automatic tests and build are made using external tools. In practice, it means that when a developer made changes on its branch and request a pull to the <code>master</code> branch, the code is exported from <code>Github.com</code> automatically to another server that test the package’s integrity by running the <code>testthat</code> tests in the package along with the <code>CRAN</code> tests (<code>R CMD check</code>).</p>
<p>Put into simple terms, the CRAN checks and unit tests of your package and the build of its website can be done online each time a push has been done to github.com. This is called continuous integration, or CI.</p>
<p>The main goal of this practice is to reduce the risk of progressive divergence between developers code to reduce at the minimum the time spent on integrating the code to the main project. It helps find conflicts and bugs very early in the development, and makes everybody save time on the end.</p>
</div>
<div id="badges" class="section level2">
<h2 class="hasAnchor">
<a href="#badges" class="anchor"></a>Badges</h2>
<p>Before going further in the CI explanations, let’s talk about badges. Badges, or shields allows a quick look to the status of a repository at a given moment. For example there is a badge that shows which licence the repository uses. These badges can be found on <a href="https://shields.io/#/examples/license">shields.io</a> or from other websites. For example, the project status is an interesting information for new users:</p>
<p><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a>.</p>
<p>The badges are often integrated in the head of the README file, and are used as a summary of your repository status. The CI external tools make an extensive use of the badges to communicate their results.</p>
</div>
<div id="ci" class="section level2">
<h2 class="hasAnchor">
<a href="#ci" class="anchor"></a>CI</h2>
<p><a href="https://travis-ci.org/">Travis CI</a> and <a href="https://ci.appveyor.com">AppVeyor</a> are two well-known external tools for CI. The first one is used to test the package for Linux-based systems, and the second one for windows. To set up automatic tests online, you need to link the repository to these services (only for project admins), and to add a configuration file for each one.</p>
<p>First, add the configuration files to the repository:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/ci">use_travis</a></span>()</a>
<a class="sourceLine" id="cb1-2" title="2">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/ci">use_appveyor</a></span>()</a></code></pre></div>
<p>The first command creates a <code>.travis.yml</code> file in the project root, and the second one the <code>appveyor.yml</code>. These files are configuration files for each service. Each command execution gives you a link that you can copy and paste in your <code>README.md</code> file such as on this README. This link will add a badge that indicates the status of the build on each service. For example here is the badge comming from TRAVIS-CI for the sandbox package:</p>
<p><a href="https://travis-ci.org/SticsRPacks/sandbox"><img src="https://travis-ci.org/SticsRPacks/sandbox.svg?branch=master" alt="Travis build status"></a>.</p>
<p>If you have the rights, then you can go to the services to set up the CI as described below.</p>
<div id="travis-ci" class="section level3">
<h3 class="hasAnchor">
<a href="#travis-ci" class="anchor"></a>Travis-CI</h3>
<p>Go to <a href="https://travis-ci.org/">Travis CI</a>, sign in with your github account, go to your repositories <a href="https://travis-ci.org/account/repositories">here</a>, choose the <code>SticsRPacks</code> organization, and activate the repository.</p>
</div>
<div id="appveyor" class="section level3">
<h3 class="hasAnchor">
<a href="#appveyor" class="anchor"></a>AppVeyor</h3>
<p>Go to <a href="https://ci.appveyor.com">AppVeyor</a>, sign in with your github account, and choose the repository <a href="https://ci.appveyor.com/projects/new">here</a>.</p>
</div>
</div>
<div id="code-coverage" class="section level2">
<h2 class="hasAnchor">
<a href="#code-coverage" class="anchor"></a>Code coverage</h2>
<p>The code coverage is a statistic that express how many functions are tested in a project. This is very useful to control the code quality of a repository at a glance. To set up code coverage, you can use the service from <a href="https://codecov.io/">codecov.io</a>, and set it up like the CIs.</p>
<p>First, install the <code>covr</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"covr"</span>)</a></code></pre></div>
<p>And set the configuration file:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/ci">use_coverage</a></span>()</a></code></pre></div>
<p>And then, you’ll have to add a line of code on the Travis-CI configuration file to make Travis-CI build the report of coverage. Please modify your <code>.travis.yml</code> file such as:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># R for travis: see documentation at https://docs.travis-ci.com/user/languages/r</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="fu">language:</span><span class="at"> R</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="fu">sudo:</span><span class="at"> </span><span class="ch">false</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="fu">cache:</span><span class="at"> packages</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="fu">r_github_packages:</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> r-lib/covr</a>
<a class="sourceLine" id="cb4-8" title="8"><span class="fu">after_success:</span></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> Rscript -e <span class="st">'covr::codecov()'</span></a></code></pre></div>
<p>You can add the badge to your README, such as:</p>
<p><a href="https://codecov.io/github/SticsRPacks/sandbox?branch=master"><img src="https://codecov.io/gh/SticsRPacks/sandbox/branch/master/graph/badge.svg" alt="Coverage status"></a>.</p>
<p>Finally, go to <a href="https://codecov.io/">codecov.io</a>, log in with your github account, and activate the repository.</p>
</div>
<div id="licence" class="section level2">
<h2 class="hasAnchor">
<a href="#licence" class="anchor"></a>Licence</h2>
<p>As stated in the vignette <a href="make-a-package.html">Make a package</a>, the easier way to set a licence to your project is by using the functions from <code>usethis</code>, <em>e.g.</em>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/licenses">use_gpl3_license</a></span>(<span class="dt">name =</span> <span class="st">"STICS Group"</span>)</a></code></pre></div>
<p>It will create the licence file, add it to the <code>DESCRIPTION</code> file of your package, and add it to <code>.Rbuildignore</code>.</p>
<p>You can also add a licence badge to your project so people can quickly see which one it is using. <a href="https://shields.io/category/license">shields.io</a> is a good platform to find a badge for your license. For exemple, the GPL-3 license can be added using this code in your markdown file:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb6-1" title="1"><span class="ot">[![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)</span>](https://www.gnu.org/licenses/gpl-3.0)</a></code></pre></div>
<p>Which yield:</p>
<p><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a></p>
</div>
<div id="previous-tutorials" class="section level2">
<h2 class="hasAnchor">
<a href="#previous-tutorials" class="anchor"></a>Previous tutorials</h2>
<ol style="list-style-type: decimal">
<li>
<a href="make-a-package.html">R package from scracth</a>.<br>
</li>
<li>
<a href="use-git-and-github.html">use GIT and GITHUB</a>.</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction-to-ci">Introduction to CI</a></li>
      <li><a href="#badges">Badges</a></li>
      <li><a href="#ci">CI</a></li>
      <li><a href="#code-coverage">Code coverage</a></li>
      <li><a href="#licence">Licence</a></li>
      <li><a href="#previous-tutorials">Previous tutorials</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Rémi Vezy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
