<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Make an R package • sandbox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Make an R package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sandbox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/make-a-package.html">Make an R package</a>
    </li>
    <li>
      <a href="../articles/use-git-and-github.html">Use Git and Github</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Make an R package</h1>
                        <h4 class="author">R. Vezy</h4>
            
            <h4 class="date">2019-03-21</h4>
      
      
      <div class="hidden name"><code>make-a-package.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This tutorial was set up to learn as quickly as possible the basis of R packages development. It is not fully comprehensive, but rather points to specific state-of-the-art tools.</p>
<p>Some tools must be installed before starting this tutorial:</p>
<ul>
<li>GIT : <a href="https://git-scm.com/" class="uri">https://git-scm.com/</a>
</li>
<li>Github desktop (Windows and Mac : <a href="https://desktop.github.com/" class="uri">https://desktop.github.com/</a>, Linux: <a href="https://github.com/shiftkey/desktop/releases" class="uri">https://github.com/shiftkey/desktop/releases</a>)</li>
<li>R: <a href="https://cloud.r-project.org/" class="uri">https://cloud.r-project.org/</a>
</li>
<li>Rstudio: <a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a>
</li>
<li>Tools to build R packages:
<ul>
<li>Rtools for Windows users: <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a>
</li>
<li>XCode for Mac users (depuis l’AppStore)</li>
<li>r-base-dev for linux users</li>
</ul>
</li>
</ul>
<p>Some R packages are also mandatory, and they must be up-to-date:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"devtools"</span>, <span class="st">"roxygen2"</span>, <span class="st">"testthat"</span>, <span class="st">"knitr"</span>,<span class="st">"usethis"</span>,<span class="st">"pkgdown"</span>))</a></code></pre></div>
</div>
<div id="r-package-format" class="section level2">
<h2 class="hasAnchor">
<a href="#r-package-format" class="anchor"></a>R package format</h2>
<p>An R package needs several mandatory files and folders:</p>
<ul>
<li>
<code>DESCRIPTION</code>: this file describes the package (name, authors…)</li>
<li>
<code>NAMESPACE</code>: this file lists the functions</li>
<li>
<code>R</code> folder: the folder that contains all R code</li>
<li>
<code>man</code> folder: the folder that contains all the help pages of the package</li>
<li>
<code>.Rbuildignore</code>: the file that tells R which files are excluded from the package build</li>
</ul>
<p>And some are not mandatory but helpful:</p>
<ul>
<li>
<code>LICENSE</code>: the license under which the project is developed on.</li>
<li>
<code>README.Rmd</code>: A text file that explains the project to humans using the Rmarkdown format. When knited, this file produces the <code>README.md</code> file that is rendered by Github on the main page. This very page is a <code>README.md</code> page that is rendered by Github, and that was created using a <code>README.Rmd</code> file.</li>
<li>
<code>README.md</code>: the file rendered by Github in the main page of the repository and that aims at explaining the project objectives.</li>
<li>
<code>.gitignore</code>: the file that tells GIT which files to ignore.</li>
</ul>
<p>Most of these files are automatically generated using specific tools that are described further.</p>
</div>
<div id="creating-an-r-package-from-sratch" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-an-r-package-from-sratch" class="anchor"></a>Creating an R package from sratch</h2>
<p>To create the skeleton of a new package, we can use the <code>usethis</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/create_package">create_package</a></span>(<span class="dt">path =</span> <span class="st">"tutorialPackage"</span>)</a></code></pre></div>
<p>The function creates an R package with all mandatory files, and open the project in a new RStudio window. To re-open it next time, just double-click on the <code>tutorialPackage.RProj</code> file.</p>
<div id="description-file-licence" class="section level3">
<h3 class="hasAnchor">
<a href="#description-file-licence" class="anchor"></a>DESCRIPTION file + LICENCE</h3>
<p>A first step is to fill the <code>DESCRIPTION</code> file. Open it and adapt it to your use. Then, choose a licence to use for your project. If you don’t know which one to use, <a href="https://choosealicense.com/">choosealicense</a> can help you. In general, it is good practice to have a LICENSE file that describes it. To do so, use the commands from <code>usethis</code>. For example to set the LICENSE to GPL-3, execute this command:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/licenses">use_gpl3_license</a></span>(<span class="dt">name =</span> <span class="st">"your name goes here"</span>)</a></code></pre></div>
</div>
<div id="add-a-readme" class="section level3">
<h3 class="hasAnchor">
<a href="#add-a-readme" class="anchor"></a>Add a README</h3>
<p>The README file is the first file that is read by the users. You should always make one, and present your package here. This README file can be written in Rmarkdown so you can add some R code and some plots.</p>
<p>To do so, use <code><a href="https://www.rdocumentation.org/packages/usethis/topics/use_readme_rmd">usethis::use_readme_rmd()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/use_readme_rmd">use_readme_rmd</a></span>()</a></code></pre></div>
<p>This function will create a pre-formatted README.Rmd file. Try to update it a little bit, and then knit it to make the README.md file.</p>
<p>Rmarkdown is a document written in markdown that can integrate some R code. The R code can be displayed to the users, executed, and its output displayed if necessary. In fact this very document is written in Rmarkdown.</p>
<p>If you don’t know how to write a Rmarkdown file, there is a nice <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">cheat sheet by RStudio</a>. In few words, here are some basics synthax used in markdown:</p>
<ul>
<li><p>Headings are written using <code>#</code>. The title of rank 1 is written as: <code># The big title</code>, the second rank is written as <code>## Rank two title</code>, the third one <code>### Little title</code>.</p></li>
<li><p>Links are written as <code>[word that appear as text](www.the_actual_link.com)</code></p></li>
<li>Images are included by a link to their location
<ul>
<li>on the web: <code>![](www.link_to_the_image.png)</code><br>
</li>
<li>on your computer: <code>![](www/image.png)</code>
</li>
</ul>
</li>
<li><p>Bold is written using two <code>**</code> as this: <code>**here is a bold sentence**</code></p></li>
<li><p>Italic is using one <code>*</code>: <code>here is a sentence in italic</code></p></li>
</ul>
<p>A markdown cheat sheet is available <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">here</a>.</p>
</div>
<div id="add-a-news-file" class="section level3">
<h3 class="hasAnchor">
<a href="#add-a-news-file" class="anchor"></a>Add a NEWS file</h3>
<p>A news file is used to track the changes from one version of a package to another. It can be very usefull for users when there are breaking changes (<em>i.e.</em> code that potentially give errors when applied as in a previous version of the package).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/use_news_md">use_news_md</a></span>()</a></code></pre></div>
</div>
<div id="add-some-code" class="section level3">
<h3 class="hasAnchor">
<a href="#add-some-code" class="anchor"></a>Add some code</h3>
<p>Now we can add some code to the project. To do so, use this command:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/use_r">use_r</a></span>(<span class="dt">name =</span> <span class="st">"div_x"</span>)</a></code></pre></div>
<p>This function just creates an R script called “div_x”. You can do it manually also if you prefer:</p>
<div class="figure">
<img src="../www/2-new_function.gif" alt="New function"><p class="caption">New function</p>
</div>
<p>Each function should be in its own separate file. If some functions are highly related, you can group them into the same file though.</p>
<p>Open <code>div_x.R</code>, and add some code, for example this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">div_x=<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb7-2" title="2">  x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb7-3" title="3">}</a></code></pre></div>
<p>This is a simple function that divides x by y.</p>
</div>
<div id="document" class="section level3">
<h3 class="hasAnchor">
<a href="#document" class="anchor"></a>Document</h3>
<p>It is <strong>mandatory</strong> to add documentation to all functions you create in a package. Fortunately, there is a tool for that too. This tool is called Roxygen2, and uses special formatted code to build documentation.</p>
<p>To add some documentation to your function, place your cursor into the function, click on the magic wand just above your script and choose Insert Roxygen Skeleton, or press ctrl+shift+alt+R. This will create a dummy Roxygen documentation above your function using the arguments of your function.</p>
<div class="figure">
<img src="../www/3-add_roxygen.gif" alt="Add roxygen"><p class="caption">Add roxygen</p>
</div>
<p>Your function should look like this now:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co">#' Title</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#'</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#' @param x </span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#' @param y </span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#'</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#' @return</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#' @export</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#'</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#' @examples</span></a>
<a class="sourceLine" id="cb8-10" title="10">div_x=<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb8-11" title="11">  x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb8-12" title="12">}</a></code></pre></div>
<p>Fill the documentation, and add some new keywords such as a description:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co">#' Divide</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">#'</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">#' @description Divide x by y</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#'</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#' @param x The numerator</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#' @param y The denominator</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#'</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#' @return x/y</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#' @export</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#'</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#' @examples</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#' div_x(1,2)</span></a>
<a class="sourceLine" id="cb9-13" title="13">div_x=<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb9-14" title="14">  x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb9-15" title="15">}</a></code></pre></div>
<p>Here are some more details about roxygen2:</p>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">Introduction</a></p></li>
<li><p>A more in-depth introduction <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html">here</a></p></li>
<li><p>How to use other packages <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/namespace.html">here</a>, especially the “Imports” part.</p></li>
<li><p>All the <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rdkeywords.html">keywords</a></p></li>
<li><p>And how to use markdown instead of roxygen keywords <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/markdown.html">here</a></p></li>
</ul>
<p>Then re-build your documentation (<code>ctrl+shift+D</code>), and re-build your package (<code>ctrl+shift+B</code>).</p>
<div class="figure">
<img src="../www/4-document_and_build.gif" alt="Document and build"><p class="caption">Document and build</p>
</div>
<p>You should have access to your own function help page:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">?div_x</a></code></pre></div>
</div>
</div>
<div id="test-your-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#test-your-functions" class="anchor"></a>Test your functions</h2>
<p>After writing a new function or modifying one, it is important to test it. This step is mandatory, because some other functions may call this very function you just wrote, and it becomes more and more difficult to know where bugs are located when none of the functions were thoroughly tested. There are two steps to test a function. The first one is to test it by yourself when designing it, and the other one is by adding automatic tests.</p>
<div id="manually" class="section level3">
<h3 class="hasAnchor">
<a href="#manually" class="anchor"></a>Manually</h3>
<p>When coding a function, you should always test if each line of code in your function is returning the expected result, and if the function returns the correct output after execution.<br>
It is good practice to maintain your R package as light as possible by keeping the data outside of it whenever possible. Creating an independent R project for tests helps you to keep the external data or executables and the created outputs outside of the package project. To do so, you can create a separate Rstudio project where you will test your package: go to <code>File</code>&gt;<code>New Project</code>&gt;<code>New Directory</code>&gt;<code>New Project</code>, type your project name and choose where it will be located on your computer. The project name is usually taken as the R package name followed by “test”, such as <code>SticsOnR_test</code>. This step is not mandatory but strongly advised.</p>
<p>After creating the new project, add a new R script (<code>ctrl+shift+N</code>), load your R package such as:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(SticsOnR)</a></code></pre></div>
<p>And test your function by giving different inputs and checking the function outputs.</p>
</div>
<div id="automatically" class="section level3">
<h3 class="hasAnchor">
<a href="#automatically" class="anchor"></a>Automatically</h3>
<p>Manual tests are a good first step to evaluate a function, but developers tend to test their functions once only, and to skip the tests when making a small change. This methodology can make the code break for everybody when something is changed but not tested, which is not desirable.</p>
<p>To avoid these difficulties, it is strongly advised to use automatic tests, also called unit tests. These tests are written once, and executed each time the code of the package is pushed to <code>github.com</code>, or every time the developer needs to. These tests are implemented by using the <code>testthat</code> package. All documentation is available on the <a href="https://testthat.r-lib.org/">package website</a>.</p>
<p>To add unit tests to our example function (or to a set of functions), run this command:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/use_testthat">use_test</a></span>(<span class="st">"div_x"</span>)</a></code></pre></div>
<div class="figure">
<img src="../www/7-add_tests.gif" alt="Add tests"><p class="caption">Add tests</p>
</div>
<p>If you add tests on your package for the first time, the <code><a href="https://www.rdocumentation.org/packages/usethis/topics/use_testthat">usethis::use_test()</a></code> command will create all the infrastructure you need, if not, it will just create a new test script to your tests.</p>
<p>Now a new folder appeared in our project: <code>tests</code>, which contains two things:</p>
<ul>
<li><p>A subfolder called <code>testthat</code> that contains all tests scripts you created.</p></li>
<li><p>An R script called <code>testthat.R</code>. This script will call all tests in the R scripts located in <code>testthat</code>. Do not mind this script, you will probably never have to modify it.</p></li>
</ul>
<p>If you executed the previous command, you should have a unit test script called <code>test-add.R</code> in this directory with the following code:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">context</span>(<span class="st">"test-add"</span>)</a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">test_that</span>(<span class="st">"multiplication works"</span>, {</a>
<a class="sourceLine" id="cb13-4" title="4">  <span class="kw">expect_equal</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb13-5" title="5">})</a></code></pre></div>
<p>This test is an example that tests if <code>2 * 2</code> is equal to <code>4</code>. Change the code to the following to test our function:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">context</span>(<span class="st">"test-add"</span>)</a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">test_that</span>(<span class="st">"add_x returns right output"</span>, {</a>
<a class="sourceLine" id="cb14-4" title="4">  <span class="kw">expect_equal</span>(<span class="kw">div_x</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb14-5" title="5">})</a></code></pre></div>
<p>This code tests that <code>div_x(1,2)</code> returns <code>0.5</code>. To run the test, go to the <code>Build</code> tab, and choose <code>Test Package</code>, or press <code>ctrl+shift+T</code>. The tests will all be executed, and a report will appear on the <code>Build</code> tab at the end, showing which tests were successfull, and which failed or returned warnings.</p>
<p><img src="../www/7-run_tests.gif"></p>
<p>You should add different tests for each of your functions, to check if they work correctly, and if they handle errors properly.</p>
<p>More details about unit tests with <code>testthat</code> are given <a href="http://r-pkgs.had.co.nz/tests.html">here</a>.</p>
</div>
<div id="cran-tests" class="section level3">
<h3 class="hasAnchor">
<a href="#cran-tests" class="anchor"></a>CRAN tests</h3>
<p>The <code>devtools</code> package that you installed previously adds also the tests that CRAN do on all packages. These tests consists on checking that all mandatory files are present, that functions are well documented, etc… It is very important to check the package regularly for errors so the users can download a functionning package. To start a CRAN check, go to the <code>Build</code> tab, press the <code>More</code> button, and choose <code>Check Package</code>, or simply use <code>ctrl+shift+E</code>. The package will be checked, and a report will be given at the end.</p>
<div class="figure">
<img src="../www/8-run_CRAN_checks.gif" alt="CRAN checks"><p class="caption">CRAN checks</p>
</div>
</div>
</div>
<div id="make-a-website" class="section level2">
<h2 class="hasAnchor">
<a href="#make-a-website" class="anchor"></a>Make a website</h2>
<p>A website can be automatically generated from the helpfiles of the R package, the vignettes and the <code>README.md</code> file by using the <code>pkgdown</code> package. For example the auto-generated website for the <code>SticsOnR</code> package is available <a href="https://sticsrpacks.github.io/SticsOnR/">here</a>.</p>
<p>To set up the website, simply execute the following code each time you update the package:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">pkgdown<span class="op">::</span><span class="kw"><a href="https://pkgdown.r-lib.org/reference/build_site.html">build_site</a></span>()</a></code></pre></div>
<p><img src="../www/5-build_site.gif"></p>
<p>When first called, the function creates a new folder called <code>docs</code> where it puts all the <code>html</code> files for the website.</p>
</div>
<div id="learn-git-github" class="section level2">
<h2 class="hasAnchor">
<a href="#learn-git-github" class="anchor"></a>Learn GIT + Github</h2>
<p>Go to the <a href="GIT_and_GITHUB.html">next vignette</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#r-package-format">R package format</a></li>
      <li><a href="#creating-an-r-package-from-sratch">Creating an R package from sratch</a></li>
      <li><a href="#test-your-functions">Test your functions</a></li>
      <li><a href="#make-a-website">Make a website</a></li>
      <li><a href="#learn-git-github">Learn GIT + Github</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Rémi Vezy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
