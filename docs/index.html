<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Help For Newcomers • sandbox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Help For Newcomers">
<meta property="og:description" content="sandbox was created to help new people to learn the basis of all tools used in the SticsRPacks project.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">sandbox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/make-a-package.html">Make an R package</a>
    </li>
    <li>
      <a href="articles/use-git-and-github.html">Use Git and Github</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<!-- rmarkdown v2 -->
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="sandbox" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#sandbox" class="anchor"></a>sandbox</h1></div>
<p><a href="https://ci.appveyor.com/project/VEZY/sandbox"><img src="https://ci.appveyor.com/api/projects/status/9r39dkphrhlt0ffa?svg=true" alt="AppVeyor build status"></a> <a href="https://travis-ci.org/SticsRPacks/sandbox"><img src="https://travis-ci.org/SticsRPacks/sandbox.svg?branch=master" alt="Travis build status"></a> <a href="https://codecov.io/github/SticsRPacks/sandbox?branch=master"><img src="https://codecov.io/gh/SticsRPacks/sandbox/branch/master/graph/badge.svg" alt="Coverage status"></a> <a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a> <!-- [![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0) --></p>
<div id="welcome" class="section level2">
<h2 class="hasAnchor">
<a href="#welcome" class="anchor"></a>Welcome !</h2>
<p>If you are a newcomer in the <code>SticsRPacks</code> community, this repository is for you. It was specifically created to help new people to learn the basis of all tools used in the project.</p>
<p>The first thing to learn in this tutorial is how to use GIT and GITHUB.</p>
</div>
<div id="git-and-github" class="section level2">
<h2 class="hasAnchor">
<a href="#git-and-github" class="anchor"></a>GIT and GITHUB</h2>
<p>GIT is a software designed for efficient version control. It helps you and your collaborators develop better softwares. With GIT, you can save “snapshots” of your work at any moment, and return to a previous state whenever you want. GIT has much more to offer, but this is out of the scope of this introduction.</p>
<div id="git-basis" class="section level3">
<h3 class="hasAnchor">
<a href="#git-basis" class="anchor"></a>GIT basis</h3>
<p>You’ll need some basis on GIT before training on this repository. A first reading that is well adapted to our example is <a href="http://r-pkgs.had.co.nz/git.html">the book of Hadley Wickham</a>. It explains well the basis of GIT in conjunction with R. There are also several tutorials on the internet for begginers:</p>
<ul>
<li><a href="https://learngitbranching.js.org/">learngitbranching</a></li>
<li><a href="https://nic-hartley.github.io/git-gud">Git Gud, web based simulator</a></li>
<li><a href="https://eu.udacity.com/course/how-to-use-git-and-github--ud775#?autoenroll=true">Udacity free MOOC</a></li>
<li><a href="https://lab.github.com/">Github tutorial</a></li>
<li>
<a href="https://openclassrooms.com/fr/courses/2342361-gerez-votre-code-avec-git-et-github">openclassrooms course</a> (in french only).</li>
</ul>
<p>A good way to start is also to read the <a href="https://git-scm.com/book/en/v2">GIT book</a>, that is made for everybody from beginners to advanced users.</p>
</div>
<div id="clone-the-sandbox-repo" class="section level3">
<h3 class="hasAnchor">
<a href="#clone-the-sandbox-repo" class="anchor"></a>Clone the sandbox repo</h3>
<p>The next step after learning GIT is to use this example. To do so, follow these simple steps:</p>
<ol style="list-style-type: decimal">
<li>Download <a href="https://git-scm.com/">GIT</a> and install it.<br>
</li>
<li>Download and install <a href="https://desktop.github.com/">Github desktop</a>, for Windows or Mac, an app that will help you use GIT. For linux, you can install for example <a href="https://gitahead.github.io/gitahead.com">GitAhead</a>.</li>
<li>Create an account on <a href="https://github.com/">Github</a>.</li>
<li>Open Github desktop, and set your personal informations to connect to your <code>Github.com</code> account.</li>
<li>On Github desktop, go to <code>File</code>, clone repository, or press <code>ctrl+shift+O</code>. And then click on <code>URL</code>, and enter this address:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1">https://github.com/SticsRPacks/sandbox.git</a></code></pre></div>
<p>Then, choose where the repository will be cloned (copied) into your computer.</p>
<blockquote>
<p>People that already are members of the SticsRPacks organisation may find the repository directly in the “Github.com” tab.</p>
</blockquote>
<p>Congratulations, you just cloned the sandbox repository onto you computer! Now you can see all files in your computer by opening the corresponding folder (<code>ctrl+shift+F</code>).</p>
</div>
</div>
<div id="r-package-format" class="section level2">
<h2 class="hasAnchor">
<a href="#r-package-format" class="anchor"></a>R package format</h2>
<p>An R package needs several mandatory files and folders:</p>
<ul>
<li>
<code>DESCRIPTION</code>: this file describes the package (name, authors…)</li>
<li>
<code>NAMESPACE</code>: this file lists the functions</li>
<li>
<code>R</code> folder: the folder that contains all R code</li>
<li>
<code>man</code> folder: the folder that contains all the help pages of the package</li>
<li>
<code>.Rbuildignore</code>: the file that tells R which files are excluded from the package build</li>
</ul>
<p>And some are not mandatory but helpful:</p>
<ul>
<li>
<code>LICENSE</code>: the license under which the project is developed on.</li>
<li>
<code>README.Rmd</code>: A text file that explains the project to humans using the Rmarkdown format. When knited, this file produces the <code>README.md</code> file that is rendered by Github on the main page. This very page is a <code>README.md</code> page that is rendered by Github, and that was created using a <code>README.Rmd</code> file.</li>
<li>
<code>README.md</code>: the file rendered by Github in the main page of the repository and that aims at explaining the project objectives.</li>
<li>
<code>.gitignore</code>: the file that tells GIT which files to ignore.</li>
</ul>
<p>Most of these files are automatically generated using specific tools that are described further.</p>
</div>
<div id="package-example" class="section level2">
<h2 class="hasAnchor">
<a href="#package-example" class="anchor"></a>Package example</h2>
<p>Before doing this tutorial, you need to:</p>
<ol style="list-style-type: decimal">
<li>Download and install <a href="https://www.rstudio.com/">RStudio</a>
</li>
<li>Download and install <a href="https://cloud.r-project.org/">R</a>
</li>
<li>Download and install the tools to build the package:
<ul>
<li>
<a href="https://cran.r-project.org/bin/windows/Rtools/">Rtools</a> if you have a windows machine</li>
<li>
<code>XCode</code> from the AppStore if you have a mac</li>
<li>
<code>r-base-dev</code> on linux</li>
</ul>
</li>
<li>Use this command line on R to download these packages:</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"devtools"</span>, <span class="st">"roxygen2"</span>, <span class="st">"testthat"</span>, <span class="st">"knitr"</span>,<span class="st">"usethis"</span>))</a></code></pre></div>
<div id="open-the-rstudio-project" class="section level3">
<h3 class="hasAnchor">
<a href="#open-the-rstudio-project" class="anchor"></a>Open the Rstudio project</h3>
<p>Double-click on the <code>sandbox.Rproj</code> file. It will open the Rstudio project. The <code>.Rproj</code> file contains informations about the project for RStudio (<em>e.g.</em> it is an R package, it uses devtools, etc…).</p>
<div class="figure">
<img src="www/1-open_project.gif" alt="Open RStudio Project"><p class="caption">Open RStudio Project</p>
</div>
<p>From the <code>Files</code> window, open the R folder. You will find here all the R scripts used for the package.</p>
</div>
<div id="simple-function" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-function" class="anchor"></a>Simple function</h3>
<p>It is highly encouraged to put each function in a separate file, unless they are very short and can be grouped under a common file with a title that describes well their purpose.</p>
<p>Click on the <a href="R/add.r"><code>add.r</code></a> file. This file contains one function: <code><a href="reference/add_x.html">add_x()</a></code>. This function simply adds the input to itself. You can see that it is preceded by some text formatted as follows: <code>#' Text</code>. This text is a Roxygen documentation. It is formated on a special way that helps R generate the package documentation.</p>
</div>
<div id="documentation" class="section level3">
<h3 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h3>
<p>The help pages of each function in a R package are generated by <code>roxygen2</code>. To learn more about function documentation read <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">this vignette</a>, and to learn more about the format of the documentation read <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html">this vignette</a> and <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/formatting.html">this one</a>.</p>
<p>Markdown can be used optionally in Roxygen documentation. To use it, execute the following line once:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># install.packages("roxygen2md")</span></a>
<a class="sourceLine" id="cb3-2" title="2">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/use_roxygen_md">use_roxygen_md</a></span>()</a></code></pre></div>
</div>
<div id="build-the-package" class="section level3">
<h3 class="hasAnchor">
<a href="#build-the-package" class="anchor"></a>Build the package</h3>
<p>Now that you have the package on your computer, you can build the documentation for all your functions by pressing <code>ctrl+shift+D</code>, or by going on the <code>Build</code> tab on the upper-right and by clicking on <code>More</code>&gt;<code>Document</code>. This uses Roxygen to build the help pages from the documentation you write above your functions. The help pages are written in <code>.Rd</code> files on the <code>man</code> folder of the package. Do not edit these files manually.</p>
<p>You can finally build and install your package by going on the <code>Build</code> tab on the upper-right, and by clicking on the <code>Install and Restart</code> button (or press <code>ctrl+shift+B</code>). This step build the package into your computer.</p>
<p>Now execute this command to access the help page of the function:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">?add_x</a></code></pre></div>
<p>The help page of the function should pop-up.</p>
</div>
<div id="add-a-function" class="section level3">
<h3 class="hasAnchor">
<a href="#add-a-function" class="anchor"></a>Add a function</h3>
<p>Create a new R script file, add the following code and save it:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">div_x=<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb5-2" title="2">  x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb5-3" title="3">}</a></code></pre></div>
<div class="figure">
<img src="www/2-new_function.gif" alt="New function"><p class="caption">New function</p>
</div>
<p>This function divides x by y and return the result.</p>
<p>To add some documentation to your function, place your cursor into the function, click on the magic wand just above your script and choose <code>Insert Roxygen Skeleton</code>, or press <code>ctrl+shift+alt+R</code>. This will create a dummy Roxygen documentation above your function using the arguments of your function.</p>
<div class="figure">
<img src="www/3-add_roxygen.gif" alt="Add roxygen"><p class="caption">Add roxygen</p>
</div>
<p>Your function should look like this now:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co">#' Title</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#'</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#' @param x </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#' @param y </span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#'</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#' @return</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#' @export</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#'</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#' @examples</span></a>
<a class="sourceLine" id="cb6-10" title="10">div_x=<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb6-11" title="11">  x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb6-12" title="12">}</a></code></pre></div>
<p>Fill the documentation, and add some new keywords such as a description:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">#' Divide</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#'</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#' @description Divide x by y</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#'</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#' @param x The numerator</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#' @param y The denominator</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#'</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#' @return x/y</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#' @export</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#'</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#' @examples</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#' div_x(1,2)</span></a>
<a class="sourceLine" id="cb7-13" title="13">div_x=<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb7-14" title="14">  x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb7-15" title="15">}</a></code></pre></div>
<p>Then re-build your documentation (<code>ctrl+shift+D</code>), and re-build your package (<code>ctrl+shift+B</code>).</p>
<div class="figure">
<img src="www/4-document_and_build.gif" alt="Document and build"><p class="caption">Document and build</p>
</div>
<p>You should have access to your own function help page:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">?div_x</a></code></pre></div>
</div>
</div>
<div id="test-your-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#test-your-functions" class="anchor"></a>Test your functions</h2>
<p>After writing a new function or modifying one, it is important to test it. This step is mandatory, because some other functions may call this very function you just wrote, and it becomes more and more difficult to know where bugs are located when none of the functions were thoroughly tested. There are two steps to test a function. The first one is to test it by yourself when designing it, and the other one is by adding automatic tests.</p>
<div id="manually" class="section level3">
<h3 class="hasAnchor">
<a href="#manually" class="anchor"></a>Manually</h3>
<p>When coding a function, you should always test if each line of code in your function is returning the expected result, and if the function returns the correct output after execution.<br>
It is good practice to maintain your R package as light as possible by keeping the data outside of it whenever possible. Creating an independent R project for tests helps you to keep the external data or executables and the created outputs outside of the package project. To do so, you can create a separate Rstudio project where you will test your package: go to <code>File</code>&gt;<code>New Project</code>&gt;<code>New Directory</code>&gt;<code>New Project</code>, type your project name and choose where it will be located on your computer. The project name is usually taken as the R package name followed by “test”, such as <code>SticsOnR_test</code>. This step is not mandatory but strongly advised.</p>
<p>After creating the new project, add a new R script (<code>ctrl+shift+N</code>), load your R package such as:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(SticsOnR)</a></code></pre></div>
<p>And test your function by giving different inputs and checking the function outputs.</p>
</div>
<div id="automatically" class="section level3">
<h3 class="hasAnchor">
<a href="#automatically" class="anchor"></a>Automatically</h3>
<p>Manual tests are a good first step to evaluate a function, but developers tend to test their functions once only, and to skip the tests when making a small change. This methodology can make the code break for everybody when something is changed but not tested, which is not desirable.</p>
<p>To avoid these difficulties, it is strongly advised to use automatic tests, also called unit tests. These tests are written once, and executed each time the code of the package is pushed to <code>github.com</code>, or every time the developer needs to. These tests are implemented by using the <code>testthat</code> package. All documentation is available on the <a href="https://testthat.r-lib.org/">package website</a>.</p>
<p>To add unit tests to our example function (or to a set of functions), run this command:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/use_testthat">use_test</a></span>(<span class="st">"div_x"</span>)</a></code></pre></div>
<div class="figure">
<img src="www/7-add_tests.gif" alt="Add tests"><p class="caption">Add tests</p>
</div>
<p>If you add tests on your package for the first time, the <code><a href="https://www.rdocumentation.org/packages/usethis/topics/use_testthat">usethis::use_test()</a></code> command will create all the infrastructure you need, if not, it will just create a new test script to your tests.</p>
<p>Now a new folder appeared in our project: <code>tests</code>, which contains two things:</p>
<ul>
<li><p>A subfolder called <code>testthat</code> that contains all tests scripts you created.</p></li>
<li><p>An R script called <code>testthat.R</code>. This script will call all tests in the R scripts located in <code>testthat</code>. Do not mind this script, you will probably never have to modify it.</p></li>
</ul>
<p>If you executed the previous command, you should have a unit test script called <code>test-add.R</code> in this directory with the following code:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">context</span>(<span class="st">"test-add"</span>)</a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">test_that</span>(<span class="st">"multiplication works"</span>, {</a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="kw">expect_equal</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb11-5" title="5">})</a></code></pre></div>
<p>This test is an example that tests if <code>2 * 2</code> is equal to <code>4</code>. Change the code to the following to test our function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">context</span>(<span class="st">"test-add"</span>)</a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw">test_that</span>(<span class="st">"add_x returns right output"</span>, {</a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="kw">expect_equal</span>(<span class="kw">div_x</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb12-5" title="5">})</a></code></pre></div>
<p>This code tests that <code>div_x(1,2)</code> returns <code>0.5</code>. To run the test, go to the <code>Build</code> tab, and choose <code>Test Package</code>, or press <code>ctrl+shift+T</code>. The tests will all be executed, and a report will appear on the <code>Build</code> tab at the end, showing which tests were successfull, and which failed or returned warnings.</p>
<div class="figure">
<img src="www/7-run_tests.gif" alt="Run tests"><p class="caption">Run tests</p>
</div>
<p>You should add different tests for each of your functions, to check if they work correctly, and if they handle errors properly.</p>
<p>More details about unit tests with <code>testthat</code> are given <a href="http://r-pkgs.had.co.nz/tests.html">here</a>.</p>
</div>
<div id="cran-tests" class="section level3">
<h3 class="hasAnchor">
<a href="#cran-tests" class="anchor"></a>CRAN tests</h3>
<p>The <code>devtools</code> package that you installed previously adds also the tests that CRAN do on all packages. These tests consists on checking that all mandatory files are present, that functions are well documented, etc… It is very important to check the package regularly for errors so the users can download a functionning package. To start a CRAN check, go to the <code>Build</code> tab, press the <code>More</code> button, and choose <code>Check Package</code>, or simply use <code>ctrl+shift+E</code>. The package will be checked, and a report will be given at the end.</p>
<div class="figure">
<img src="www/8-run_CRAN_checks.gif" alt="CRAN checks"><p class="caption">CRAN checks</p>
</div>
</div>
</div>
<div id="make-a-website" class="section level2">
<h2 class="hasAnchor">
<a href="#make-a-website" class="anchor"></a>Make a website</h2>
<p>A website can be automatically generated from the helpfiles of the R package, the vignettes and the <code>README.md</code> file by using the <code>pkgdown</code> package. For example the auto-generated website for the <code>SticsOnR</code> package is available <a href="https://sticsrpacks.github.io/SticsOnR/">here</a>.</p>
<p>To set up the website, simply execute the following code each time you update the package:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">pkgdown<span class="op">::</span><span class="kw"><a href="https://pkgdown.r-lib.org/reference/build_site.html">build_site</a></span>()</a></code></pre></div>
<div class="figure">
<img src="www/5-build_site.gif" alt="Build site"><p class="caption">Build site</p>
</div>
<p>When first called, the function creates a new folder called <code>docs</code> where it puts all the <code>html</code> files for the website. When pushed to github.com, a website is created from these files if you authorized github pages.</p>
<p>To authorize github pages, go to the project page on the repository, then go to <code>settings</code>&gt;<code>Github Pages</code>&gt;<code>Source</code> and then choose <code>master branch /docs folder</code>.</p>
<p>The website will be at an address of the form (<a href="https://sticsrpacks.github.io/%7Bpackagename%7D/" class="uri">https://sticsrpacks.github.io/{packagename}/</a>), for example our project is rendered at this adress: <a href="https://sticsrpacks.github.io/sandbox/" class="uri">https://sticsrpacks.github.io/sandbox/</a></p>
</div>
<div id="share-your-changes-using-gitgithub" class="section level2">
<h2 class="hasAnchor">
<a href="#share-your-changes-using-gitgithub" class="anchor"></a>Share your changes using GIT/GITHUB</h2>
<div id="branches" class="section level3">
<h3 class="hasAnchor">
<a href="#branches" class="anchor"></a>Branches</h3>
<p>For the sake of simplicity, we only used the <code>master</code> branch of the repository in the previous example. The downside of using only this branch is that each time a user will change the code while you change it also, it will override the others code. To avoid this behavior, GIT has a nice feature called branches. A branch can be thought as a copy of your project at a given time, that have a parallel history to the <code>master</code> branch. In other words, it allows you to develop some code while not bothering the others.</p>
<p>To ensure that developers use branches, all the <code>master</code> branches of the SticsRPacks repositories will be protected against commits, and must have at least one reviewer. See <a href="https://help.github.com/en/articles/configuring-protected-branches">this page</a> for more details on how to set those rules.</p>
<p>To make modifications to the code, you can create your own branch using Github desktop. Usually, we name a branch after the feature it is supposed to add. You can make a new branch for each independent feature you want to use. To create a new branch, simply follow the steps showed below:</p>
<div class="figure">
<img src="www/new_branch/1-new_branch.gif" alt="New branch"><p class="caption">New branch</p>
</div>
</div>
<div id="make-your-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#make-your-changes" class="anchor"></a>Make your changes</h3>
<p>You can then freely work on your code without making any changes to the master branch. For instance, we can add some tests inside the <code>add_x</code> function to test if the input <code>x</code> is numeric before computing the addition:</p>
<div class="figure">
<img src="www/new_branch/2-add_tests_add_x.gif" alt="Add code"><p class="caption">Add code</p>
</div>
</div>
<div id="commit" class="section level3">
<h3 class="hasAnchor">
<a href="#commit" class="anchor"></a>Commit</h3>
<p>Each time you modify the package, you should commit your changes to GIT. It is good practice to commit whenever a little step has been reached so the commit message is short enough but still explains everything you did. This methodology make more commits, but is still preferred because it is easier to find changes in the history earlier. So do not hesitates to split your work into little commits.</p>
<p>To commit your changes, open <code>Github desktop</code> and choose the repository. The files that were modified in the repository appear in the left-most window, and the associated code that was added or removed should appear in the window on the right. The code in green was added, and the code in red was removed. To commit those changes, enter a commit message in the left window next to your account image, where it is written <code><a href="https://www.rdocumentation.org/packages/base/topics/groupGeneric">Summary (required)</a></code>. The message should be concise but should describe all the changes. Then press <code>Commit to master</code>. Your changes are commited to the master branch and saved on your computer.</p>
<div class="figure">
<img src="www/new_branch/3-commit_add_tests_add_x.gif" alt="Commit"><p class="caption">Commit</p>
</div>
</div>
<div id="push" class="section level3">
<h3 class="hasAnchor">
<a href="#push" class="anchor"></a>Push</h3>
<p>Whenever your work is done, or you go for lunch, you should push all your commits to github.com. To do so, just press the <code>Push origin</code> button in the center or in the upper window. Github desktop will send the changes to github.com, and they should appear in the repository.</p>
<p>If you just created your branch, you have to publish it Github.com before:</p>
<div class="figure">
<img src="www/new_branch/4-publish_branch.gif" alt="Publish branch"><p class="caption">Publish branch</p>
</div>
</div>
<div id="pull-request" class="section level3">
<h3 class="hasAnchor">
<a href="#pull-request" class="anchor"></a>Pull request</h3>
<p>Whenever you finished the modifications you wanted to do with your branch, you can make a pull request. This is a way of asking other contributors for their approval of your changes before merging your code to the <code>master</code> branch:</p>
<p><img src="www/new_branch/5.1-pull_request.gif"></p>
<p>You’ll have several steps to complete after:</p>
<ul>
<li>give a general title to your pull request, for example here it is named after the last commit: “Test if x is numeric in add_x”<br>
</li>
<li>add a little description of the changes</li>
<li>check if the merge is automatic or not (is there any conflicts ?)</li>
<li>wait for the automatic tests to run, and if they are successfull:</li>
<li>assign a reviewer if possible</li>
</ul>
<div class="figure">
<img src="www/new_branch/5.2-ask_reviewer.gif" alt="Ask review"><p class="caption">Ask review</p>
</div>
<ul>
<li>and finally create the pull request.</li>
</ul>
</div>
<div id="review" class="section level3">
<h3 class="hasAnchor">
<a href="#review" class="anchor"></a>Review</h3>
<p>As a reviewer, you’ll have to open the pull request (in the Pull requests tab), and review the code in the “Files changed” sub-tab:</p>
<div class="figure">
<img src="www/new_branch/5.3-review.gif" alt="Review"><p class="caption">Review</p>
</div>
<p>If there are some changes needed before merging the code to the <code>master</code> branch, you can leave a comment (and even propose some code) right where the changes are needed.</p>
<p>Then, the person that did pull the request will have to integrate those proposed changes into its own branch, commit the changes, and update the pull request.</p>
<p>Then, the reviewer will review the code again, and can finally accept the pull request: <img src="www/new_branch/5.4-accept.gif" alt="Accept pull request"> When the pull request is accepted, it can finally be merged into the <code>master</code> branch:</p>
<div class="figure">
<img src="www/new_branch/5.5-merge.gif" alt="Merge"><p class="caption">Merge</p>
</div>
<p>This step will add all the commits from the branch to the <code>master</code> branch. A cleaner option is to use the <code>Squash and merge</code> option, which will combine all commits from the branch into one commit only. This option may be cleaner to avoid too many unnecessary commits in the master branch.<br>
You can optionally delete the branch after merging it to make a cleaner repository.</p>
<p>Note that the previous step can be made all at once by the reviewer (accept and merge).</p>
</div>
<div id="update" class="section level3">
<h3 class="hasAnchor">
<a href="#update" class="anchor"></a>Update</h3>
<p>Once the merge is done, all users can update their local repository with the new code. If the branch was deleted from Github.com, it will still remain on the local copy of the user, so you will have to delete it manually using Github desktop:</p>
<div class="figure">
<img src="www/new_branch/5.6-update_repo.gif" alt="Update repository"><p class="caption">Update repository</p>
</div>
</div>
<div id="conflicts" class="section level3">
<h3 class="hasAnchor">
<a href="#conflicts" class="anchor"></a>Conflicts</h3>
<p>A pull request may modify some code that was also modified by another user that pulled his changes before you in the <code>master</code> branch. In that case, GIT cannot know which code is the right one, or if there is a need of more code to integrate both changes, so a manual choice has to be made.</p>
<p>Here is an example of a conflict in two steps:</p>
<ul>
<li><p>Making different modifications on two different branches: <img src="www/conflicts/1-create_merge_conflict.gif" alt="Merge conflict"></p></li>
<li><p>Trying to merge the branches and resolving the conflicts using Atom:</p></li>
</ul>
<div class="figure">
<img src="www/conflicts/2-merge_conflict.gif" alt="Resolve conflict"><p class="caption">Resolve conflict</p>
</div>
<p>This is an example made on the local repository, but a pull request would yield the same result.</p>
<p>Here is an example with a pull request from a branch:</p>
<div class="figure">
<img src="www/conflicts/3-pull_request_conflict.gif" alt="Resolve pull request conflict"><p class="caption">Resolve pull request conflict</p>
</div>
<p>As you can see, this pull request cannot be automatically merged, so you have to resolve the conflicts from your computer, or you can even use the web editor if you prefer:</p>
<div class="figure">
<img src="www/conflicts/4-pull_request_conflict_merge.gif" alt="Merge pull request after resolved conflict"><p class="caption">Merge pull request after resolved conflict</p>
</div>
</div>
</div>
<div id="install" class="section level2">
<h2 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h2>
<p>New users can now install your package directly from the Github repository using this command line:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb14-2" title="2">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"SticsRPacks/sandbox"</span>)</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co"># Or using devtools if already installed:</span></a>
<a class="sourceLine" id="cb14-4" title="4">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"SticsRPacks/sandbox"</span>)</a></code></pre></div>
<div class="figure">
<img src="www/9-install_from_gitub.gif" alt="Install package"><p class="caption">Install package</p>
</div>
</div>
<div id="badges-ci-and-code-coverage" class="section level2">
<h2 class="hasAnchor">
<a href="#badges-ci-and-code-coverage" class="anchor"></a>Badges, CI and code coverage</h2>
<div id="badges" class="section level3">
<h3 class="hasAnchor">
<a href="#badges" class="anchor"></a>Badges</h3>
<p>Badges, or shields allows a quick look to the status of a repository at a given moment. For example there is a badge that shows which licence the repository uses. This badge can be found on <a href="https://shields.io/#/examples/license">shields.io</a>, and more are available from the <a href="https://shields.io">main page</a> of this website or from other websites. For example, the project status is an interesting information for new users: <a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a>.</p>
<p>The badges are often integrated in the head of the README file so users can see the repository status directly.</p>
</div>
<div id="ci" class="section level3">
<h3 class="hasAnchor">
<a href="#ci" class="anchor"></a>CI</h3>
<p>There are some interesting external tools that can be used to enhance collaboration. For example the package CRAN checks and unit tests can be run online each time a push has been done to github.com. This is called continuous integration, or CI. <a href="https://travis-ci.org/">Travis CI</a> and <a href="https://ci.appveyor.com">AppVeyor</a> are two well-known tools for CI. The first one is used to test the package on linux, and the second one on windows. To set up automatic tests online, you need to link the package to these services, and to add configuration files for each one. You can do so only if you have the required rights on the project.</p>
<p>First, add the configuration files to the repository:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/ci">use_travis</a></span>()</a>
<a class="sourceLine" id="cb15-2" title="2">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/ci">use_appveyor</a></span>()</a></code></pre></div>
<p>The first command creates a <code>.travis.yml</code> file in the project root, and the second one the <code>appveyor.yml</code>. These files are configuration files for each service. Each command execution gives you a link that you can copy and paste in your <code>README.md</code> file such as on this README. This link will add a badge that indicates the status of the build on each service. For example here is the badge for TRAVIS-CI: <a href="https://travis-ci.org/SticsRPacks/sandbox"><img src="https://travis-ci.org/SticsRPacks/sandbox.svg?branch=master" alt="Travis build status"></a>.</p>
<p>If you have the rights, then you can go to the services to set up the CI as described below.</p>
<div id="travis-ci" class="section level4">
<h4 class="hasAnchor">
<a href="#travis-ci" class="anchor"></a>Travis-CI</h4>
<p>Go to <a href="https://travis-ci.org/">Travis CI</a>, sign in with your github account, go to your repositories <a href="https://travis-ci.org/account/repositories">here</a>, choose the <code>SticsRPacks</code> organization, and activate the repository.</p>
</div>
<div id="appveyor" class="section level4">
<h4 class="hasAnchor">
<a href="#appveyor" class="anchor"></a>AppVeyor</h4>
<p>Go to <a href="https://ci.appveyor.com">AppVeyor</a>, sign in with your github account, and choose the repository <a href="https://ci.appveyor.com/projects/new">here</a>.</p>
</div>
</div>
<div id="code-coverage" class="section level3">
<h3 class="hasAnchor">
<a href="#code-coverage" class="anchor"></a>Code coverage</h3>
<p>The code coverage is a statistic that express how many functions are tested in a project. This is very useful to control the code quality of a repository at a glance. To set up code coverage, you can use the service from <a href="https://codecov.io/">codecov.io</a>, and set it up like the CIs.</p>
<p>First, install the <code>covr</code> package:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"covr"</span>)</a></code></pre></div>
<p>And then set the configuration file:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/ci">use_coverage</a></span>()</a></code></pre></div>
<p>And then, you’ll have to add a line of code on the Travis-CI configuration file to make Travis-CI build the report of coverage. Please modify your <code>.travis.yml</code> file such as:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># R for travis: see documentation at https://docs.travis-ci.com/user/languages/r</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="fu">language:</span><span class="at"> R</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="fu">sudo:</span><span class="at"> </span><span class="ch">false</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="fu">cache:</span><span class="at"> packages</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="fu">r_github_packages:</span></a>
<a class="sourceLine" id="cb18-7" title="7">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> r-lib/covr</a>
<a class="sourceLine" id="cb18-8" title="8"><span class="fu">after_success:</span></a>
<a class="sourceLine" id="cb18-9" title="9">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> Rscript -e <span class="st">'covr::codecov()'</span></a></code></pre></div>
<p>You can add the badge to your README, such as: <a href="https://codecov.io/github/SticsRPacks/sandbox?branch=master"><img src="https://codecov.io/gh/SticsRPacks/sandbox/branch/master/graph/badge.svg" alt="Coverage status"></a>.</p>
<p>Finally, go to <a href="https://codecov.io/">codecov.io</a>, log in with your github account, and activate the repository.</p>
</div>
</div>
<div id="licence" class="section level2">
<h2 class="hasAnchor">
<a href="#licence" class="anchor"></a>Licence</h2>
<p>To use a licence, the easier way is to use the dedicated functions from <code>usethis</code>. There are four licences available from this package: MIT, GPL3, APL2 and CC0. <a href="https://choosealicense.com/licenses/">This website</a> can help you choose your licence according to your needs.</p>
<p>To set the licence to GPL v3, simply execute this line of code:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">usethis<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/usethis/topics/licenses">use_gpl3_license</a></span>(<span class="dt">name =</span> <span class="st">"STICS Group"</span>)</a></code></pre></div>
<p>It will create the licence file, add it to the <code>DESCRIPTION</code> file of your package, and add it to <code>.Rbuildignore</code>.</p>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>In summary, after everything is set up, here is the steps to follow:</p>
<ol style="list-style-type: decimal">
<li>Modify the code or add new functions<br>
</li>
<li>Update the documentation (<code>ctrl+shift+D</code>)<br>
</li>
<li>Update the website (<code><a href="https://pkgdown.r-lib.org/reference/build_site.html">pkgdown::build_site()</a></code>)</li>
<li>Build the package (<code>ctrl+shift+B</code>)<br>
</li>
<li>(optional) Run the CRAN checks locally (<code>ctrl+shift+E</code>)<br>
</li>
<li>(optional) Run the unit tests locally (<code>ctrl+shift+T</code>)<br>
</li>
<li>Commit your changes using Github desktop<br>
</li>
<li>Push your commits to github.com<br>
</li>
<li>Control the badges to check that the package builds correctly on AppVeyor and Travis-CI</li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Rémi Vezy <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Rémi Vezy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
